#include <iostream>
#include <stdio.h>
#include <vector>

using namespace std;

int pow_mod(int a, int x, int p);
void from_dec_to_bin(int x, vector <int> &binary);

int main() {
    int a, x, p, otv;
    cout << "Input 'a', 'x', 'p':" << endl;
    cin >> a >> x >> p;
    otv = pow_mod(a, x, p);
    cout << a << "^" << x << " mod " << p << " = " << otv;
    return 0;
}

int pow_mod(int a, int x, int p) {
    vector <int> binary;
    from_dec_to_bin(x, binary);
    int y = 1, s = a;
    for (auto it: binary) {
        y = it == 1 ? (y * s) % p : y;
        s = (s * s) % p;
    }
    return y;
}

void from_dec_to_bin(int x, vector <int> &binary) {
    while (x) {
        binary.push_back(x % 2);
        x = (int)(x / 2);
    }
}